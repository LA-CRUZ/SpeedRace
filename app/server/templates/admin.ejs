<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game data</title>
</head>
<body>
    <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
    <form action="/admin/ttl" method="POST">
        <label for="ttl">TTL de base : </label><input id="ttl" name="ttl" type="text"/>
        <input type="submit" value="Valider"/>
    </form>
    <form action="/admin/target" method="POST">
        <label for="latitude">Latitude de la cible : </label><input id="latitude" name="latitude" step="0.001" type="number"/>
        <label for="longitude">Longitude de la cible : </label><input id="longitude" name="longitude" step="0.001" type="number"/>
        <input type="submit" value="Valider"/>
    </form>
    <form action="/admin/start" method="POST">
        <label for="gameName">Nom de la partie : </label><input id="gameName" name="gameName" type="text"/>
        <input type="submit" value="Commencer une partie" />
    </form>
    <form action="http://192.168.75.28:8080/users" method="POST" name="create-user" target="dummyframe">
        <label for="login">Login de l'utilisateur</label><input id="login" name="login" type="text">
        <label for="password">Password de l'utilisateur</label><input id="password" name="password" type="text">
        <input type="reset" value="CrÃ©er l'utilisateur" onclick='document.forms["create-user"].submit()'/>
    </form>
    <ul>
        <% errors.forEach(function(error){ %>
            <li><%= error %></li>
        <% }); %>
    </ul>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
    <script src="static/js/AjaxRequest.js"></script>
    <script>
        function updateUserList() {
            getData("http://192.168.75.28:8080/users")
                .then((response) => {
                    return response.json()
                }).then((json) => {
                    json.forEach((elem) => {
                        getData(elem)
                            .then((response) => {
                                return response.json()
                            }).then((json) => {
                                console.log(json)
                            })
                    })
                })
        }

        updateUserList()
    </script>
</body>
</html>